/* eslint-disable  func-names */
/* eslint-disable  no-console */

const Alexa = require('ask-sdk');

const GetNewFactHandler = {
  canHandle(handlerInput) {
    const request = handlerInput.requestEnvelope.request;
    return request.type === 'LaunchRequest'
      || (request.type === 'IntentRequest'
        && request.intent.name === 'GetNewFactIntent');
  },
  handle(handlerInput) {
    const factArr = data;
    const factIndex = Math.floor(Math.random() * factArr.length);
    const randomFact = factArr[factIndex];
    const speechOutput = GET_FACT_MESSAGE + randomFact;

    return handlerInput.responseBuilder
      .speak(speechOutput)
      .withSimpleCard(SKILL_NAME, randomFact)
      .getResponse();
  },
};

const HelpHandler = {
  canHandle(handlerInput) {
    const request = handlerInput.requestEnvelope.request;
    return request.type === 'IntentRequest'
      && request.intent.name === 'AMAZON.HelpIntent';
  },
  handle(handlerInput) {
    return handlerInput.responseBuilder
      .speak(HELP_MESSAGE)
      .reprompt(HELP_REPROMPT)
      .getResponse();
  },
};

const ExitHandler = {
  canHandle(handlerInput) {
    const request = handlerInput.requestEnvelope.request;
    return request.type === 'IntentRequest'
      && (request.intent.name === 'AMAZON.CancelIntent'
        || request.intent.name === 'AMAZON.StopIntent');
  },
  handle(handlerInput) {
    return handlerInput.responseBuilder
      .speak(STOP_MESSAGE)
      .getResponse();
  },
};

const SessionEndedRequestHandler = {
  canHandle(handlerInput) {
    const request = handlerInput.requestEnvelope.request;
    return request.type === 'SessionEndedRequest';
  },
  handle(handlerInput) {
    console.log(`Session ended with reason: ${handlerInput.requestEnvelope.request.reason}`);

    return handlerInput.responseBuilder.getResponse();
  },
};

const ErrorHandler = {
  canHandle() {
    return true;
  },
  handle(handlerInput, error) {
    console.log(`Error handled: ${error.message}`);

    return handlerInput.responseBuilder
      .speak('क्षमा करे, एक त्रुटि प्राप्त हुई।')
      .reprompt('क्षमा करे, एक त्रुटि प्राप्त हुई।')
      .getResponse();
  },
};

const SKILL_NAME = 'Game Of Thrones Facts';
const GET_FACT_MESSAGE = 'आपके तथ्य:';
const HELP_MESSAGE = 'आप मुझे एक तथ्य बता सकते हैं, या, आप बाहर निकलने के लिए कह सकते हैं ... मैं आपकी क्या मदद कर सकता हूं?';
const HELP_REPROMPT = 'मैं आपकी क्या मदद कर स';
const STOP_MESSAGE = 'अलविदा!';

const data = [
  '2017 में 450 से अधिक शिशुओं को "खालेसी" नाम दिया गया था। और 2,000 से अधिक का नाम आर्य था। ',
  'नकली खून बचा है। आप आइकिया के शो में इस्तेमाल किए गए नाइट्स वॉच को $ 79 में खरीद सकते हैं',
  'किट हैरिंगटन, जो अभिनेता जॉन स्नो की भूमिका निभाता है, वह जॉन हैरिंगटन के वंशज है, वह व्यक्ति जिसने पहले फ्लशिंग शौचालय का आविष्कार किया था।',
  'द लैनिस्टर्स को मूल थीम गीत बहुत पसंद आया होगा।',
  'घोड डैनेरीज़ ने शो में खल ड्रोगो के लिए खाया, वास्तव में एक गमी भालू जैसे पदार्थ का तीन पाउंड द्रव्यमान था। ',
  'पीटर डिंकलेज शाकाहारी हैं। शो में वह जो भी "मीट" खाते हैं, वह असली नहीं है।',
  'गेम ऑफ थ्रोन्स का पिछला सीज़न लगभग 10 मिलियन डॉलर प्रति एपिसोड है - फ्रेंड्स के फाइनल सीज़न की समान राशि। अंतिम सीज़न 15 मिलियन डॉलर प्रति एपिसोड से आगे निकल जाएगा। ',
  '2019 के एमी पुरस्कारों के रूप में, किट हरिंगटन ने अभी भी गेम ऑफ थ्रोन्स के अंतिम सीज़न को नहीं देखा है।',
  'ब्रॉन की भूमिका निभाने वाले जेरोम फ्लिन 90 के दशक में डॉप-वॉप जोड़ी में रॉबसन और जेरोम थे। उनके पास यू.के. में तीन नंबर 1 एकल थे',
  'ब्रान 13 वर्षीय साथी जोजेन रीड की भूमिका निभाने वाले अभिनेता वास्तव में फिल्माने के समय 23 वर्ष के थे। वह डिज़नी चैनल के शो फिनीस और फ़ेरब पर फ़र्ब की आवाज़ भी थे। और वह दरअसल लव का बच्चा है।',
  'एमीलिया क्लार्क, जो शो में डेनेरीज़ की भूमिका निभाती है, अपने बालों को गोरा नहीं करती है। वह एक विग पहनती है।',
  'एचबीओ शो के सह-निर्माता डेविड बेनिओफ और डी। बी। वीस ने इट्स ऑलवेज सनी इन फिलाडेल्फिया के नौवें सीज़न के एपिसोड में एक एपिसोड लिखा, जिसे "फ्लावर फ़ॉर चार्ली" कहा गया।',
  'जॉन स्नो के लिए अपने ऑडिशन से पहले, किट हैरिंगटन ने मैकडॉनल्ड्स में एक लड़ाई की और एक बड़े ऑलर श्रेडर के साथ ऑडिशन दिया',
];

const skillBuilder = Alexa.SkillBuilders.standard();

exports.handler = skillBuilder
  .addRequestHandlers(
    GetNewFactHandler,
    HelpHandler,
    ExitHandler,
    SessionEndedRequestHandler
  )
  .addErrorHandlers(ErrorHandler)
  .lambda();
